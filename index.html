<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="lib/default.min.css">
    <script src="lib/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <title>How To Node&PUG</title>
</head>
<body>
    <main>
        <article>
            <h1>Как вести разработку проекта на NodeJS + PUG (Jade)</h1>
            <h3>Краткая предыстория и создание</h3>
            <p>
                Мы ведём разработку веб-сервиса с использованием технологий NodeJS и PUG JS. 
                Многие скорее всего знают, насколько это удобные инструменты в связке. Однако
                при командной разработке появились некоторые нюансы, которыми мы с удовольствием готовы поделиться.
            </p>
            <p>
                Для начала создадим проект и подключим в него необходимые пакеты. Прямо как показано на скриншотах:
            </p>
            <img src="img/s1.png">
            <p>
                Нам понадобится два пакета:
                <pre><code class="javascript">
                            "pug": "^2.0.0-rc.4", 
                            "pug-cli": "^1.0.0-alpha6",
                    </code></pre>
            </p>
            <img src="img/s2.png">
            <p>
                После того, как мы их добавили, нужно установить недостающие пакеты. Для этого правой кнопкой мыши
                кликните по npm -> "Install Missing npm Packages"
            </p>
            <h3>Создание шаблона PUG</h3>
            <p>Создадим шаблон PUG, который будет расширять index.pug
                и назовем его "dialog.pug"
            </p>
            <pre><code class="javascript">
                    extends layout
                    block append content
                        div Dialog with #{targetuserName}                    
            </code></pre>
            <p>А так изменится наш "index.js" в папке "routes"</p>
            <pre><code class="javascript">
                    router.get('/dialog', function (req, res) {
                        //заполним тестовые данные
                        var data = {
                            userid: 1,
                            targetuserid: 2,
                            targetuserName: 'Max',
                            history: [
                                {
                                    author: 1,
                                    msg_txt: 'Hey, Dude!',
                                    id: 1
                                },
                                {
                                    author: 1,
                                    msg_txt: 'This is wonderful!',
                                    id: 2
                                },
                                {
                                    author: 2,
                                    msg_txt: 'Good morning!',
                                    id: 3
                                },
                                {
                                    author: 2,
                                    msg_txt: 'Sure!',
                                    id: 4
                                }
                            ]
                        }
                        //в результате функции render сервер 
                        //сформирует html документ и отправит его в браузер 
                        res.render('dialog', data);
                    });                   
            </code></pre>

        </article>
    </main>
</body>
</html>

<style>
    article {
        width: 50%;
        margin-left: 25%;
    }
    img {
        width: 100%;
    }
</style>